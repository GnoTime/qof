<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Query Object Framework</title>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="local.css" type="text/css" />


</head>
<body>

<div class="header">
<span>

Query Object Framework
</span>

</div>


<div class="actions">
<ul>

<li><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=index&amp;do=edit">Edit</a></li>


<li><a href="recentchanges/">RecentChanges</a></li>


<li><a href="http://svn.debian.org/viewsvn/qof/trunk/wiki/trunk/index.mdwn">History</a></li>


<li><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?do=prefs">Preferences</a></li>


<li><span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=discussion&amp;from=index&amp;do=create">?</a>Discussion</span><br /></li>

</ul>
</div>




<div id="content">
<p><img src="qof-logo.jpg" id="qoflogo" alt="image based on the hebrew
symbol of the same name"></p>

<div id="actions">
<ul>
<li><a href="#intro">Introduction</a></li>
<li><a href="http://alioth.debian.org/projects/qof/">Alioth</a></li>
<li><a href="http://svn.debian.org/viewsvn/qof/">SVN</a></li>
<li><a href="#docs">Documentation</a>
<ul><li><a href="start/">Starting with QOF</a></li></ul>
</li>
<li><a href="#download">Downloads</a></li>
<li><a href="hacking/">Packaging</a></li>
<li><a href="hacking/#roadmap">Roadmap</a></li>
<li><a href="#example">Examples</a></li>
<li><a href="#origins">Origins</a></li>
<li><a href="#functions">Function</a></li>
<li><a href="#goals">Goals</a></li>
<li><a href="#status">Status</a></li>
<li><a href="/why-qof">Why QOF?</a></li>
<li><a href="http://www.data-freedom.org/">Data Freedom</a></li>
<li><a href="#support">Support</a></li>
<li><a href="http://www.iro.umontreal.ca/translation/registry.cgi?domain=qof">
Translation</a></li>
</ul>
</div>

<h2><span id="intro">Introduction</span></h2>

<p>QOF, the Query Object Framework, provides a set of C Language utilities
for performing generic structured complex queries on a set of data held by a set of
C/C++ objects. This framework is unique in that it does NOT require SQL or any
database at all to perform the query. Thus, it allows programmers to add query
support to their applications without having to hook into an SQL Database.</p>

<p>Typically, if you have an app, and you want to add the ability to show a set of
reports, you will need the ability to perform queries in order to get the data
you need to show a report. Of course, you can always write a set of ad-hoc
subroutines to return the data that you need. But this kind of a programming
style is not extensible: just wait till you get a user who wants a slightly
different report.</p>

<p>The idea behind QOF is to provide a generic framework so that
any query can be executed, including queries designed by the end-user.
Normally, this is possible only if you use a database that supports SQL, and
then only if you deeply embed the database into your application. QOF provides
simpler, more natural way to work with objects.</p>

<hr />

<h2><span id="example">Examples</span></h2>

<h3>Generating examples of your own</h3>

<p><a href="http://qof-gen.sourceforge.net/">
<img src="sflogosm.png" alt="qof-gen" id="sflogosm">
</a></p>

<p>Writing new QOF objects and examples can be a tad repetitive so
<a href="http://qof-gen.sourceforge.net/">QOF generator</a>
automates the process using HTML forms and PHP. The generator is still new but
it does create usable C code and an example program that can be compiled against
current QOF CVS.</p>

<h4>Using qof-generator with common front-end code</h4>

<p>A second role for qof-generator involves providing a central repository for
common front-end code that cannot go into QOF itself. Unlike backends, it seems
strange to make a front-end into a GModule (although it can probably be done) and
front-ends require dependencies that simply do not fit with the wider remit of the
libqof1 library. So <code>qof-main.c|h</code> and <code>qof-shell.c|h</code> will
be updated from qof-generator so that each project can benefit from improvements
made elsewhere.</p>

<hr />

<h2><span id="docs">Documentation</span></h2>

<p>The API documentation is embedded in the header files and
<a href="doxy/index.html">can be viewed as HMTL</a>.</p>

<hr />

<h2><span id="support">Support</span></h2>

<p>Support should be obtained by subscribing to the mailing list:
<a href="http://lists.alioth.debian.org/mailman/listinfo/qof-devel">http://lists.alioth.debian.org/mailman/listinfo/qof-devel</a></p>

<hr />

<h2><span id="origins">Origins</span></h2>

<p>QOF is an offshoot from the <a href="http://www.gnucash.org/">GnuCash Project</a>, 
where this framework is a deep, central component. QOF is basically
the <span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=gnucash&amp;from=index&amp;do=create">?</a>GnuCash</span> &quot;engine&quot; with all of the financial objects removed. As such,
QOF is &quot;tried and true&quot;, and has proven its worth.</p>

<hr />

<h2><span id="functions">Function</span></h2>

<p>Besides the query framework, QOF also provides a number of other
base functions from <span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=gnucash&amp;from=index&amp;do=create">?</a>GnuCash</span> and a few extensions of its own:</p>

<ul>
<li><p><strong>Universally-Unique 128-bit identifiers</strong> These can be used to reference an 
object without having to have a pointer to it: references can be stored in files, 
passed over the net, etc.</p></li>
<li><p><strong>Persistent-Storage backend</strong> A collection of objects can be 
associated with a particular data store. Besides
just reading from and writing to the backend, queries can be passed to the
backend, so that if a particular object does not exist locally, it can be
fetched from the backend.</p></li>
<li><p><strong>Key-Value Pair trees</strong> (also known as &quot;frames and slots&quot;).
KVP trees provide a generic, extensible way to hang additional data onto an
object. The trees store the data hierarchically, in a set of hash tables, and
can be accessed using a URL-like path name. KVP trees are a great way to allow
objects to be extensible.</p></li>
<li><p><strong>Log Utilities</strong> Allow warning, error and debugging 
messages to be enabled or disabled at
run-time, thus allowing individual components of an application to be
individually traced.</p></li>
<li><p><strong>Numeric support</strong> Provides a set of exact-math functions 
for quantities that can be expressed as
ratios. In particular, this is handy for working with money and prices, where
round-off errors need to be eliminated and/or precisely controlled.</p></li>
<li><p><strong>Date and time utilities</strong> - True 64bit handling of all times 
(seconds and nanoseconds) as well as all calendar dates.
With the exception of locale-sensitive formats, standard parsing and printing
commands have been extended to cope with all possible times and dates within
a couple of dozen times the age of the universe. All dates and times are
consistent between platforms, whether time<em>t is 32bit or 64bit. Conversion to
limited types like struct tm and time</em>t is supported within the range
of the respective type, and sensible errors when out of range.
(32bit time_t values will overflow in 2038.)</p></li>
<li><p><strong>Generic XML format</strong> For data interchange. QOF objects can be translated and mapped between
applications, liberating the user's data from the original application.</p></li>
<li><p><strong>Book merging</strong> Allows easy import / export of QOF data and handles collisions and user
intervention.</p></li>
<li><p><strong>Undo support</strong> Allows parameter level undo and redo support with programmable begin and
end points. Each begin and end marks a single undo operation which can
contain multiple parameter changes, entity creations or deletions according
to the needs of the user. Undo currently supports up to 300 operations.</p></li>
<li><p><strong>SQLite backend</strong> Intended for embedded usage only but 
relatively stable. Non-embedded systems
may want to wait for the libgnome-db backend that will support plugins to
various database managers, including sqlite.</p></li>
</ul>

<hr />

<h2><span id="goals">Project Goals</span></h2>

<p>Below are some concrete project goals.</p>

<p>See <a href="why-qof.html">&quot;Why QOF?&quot;</a> for the more abstract ideas
behind QOF, including the relationships between &quot;database-driven&quot;,
&quot;program-driven&quot; and &quot;data-centric&quot; programming explored at
<a href="http://www.data-freedom.org/explain.html">Data-Freedom.org</a>.</p>

<ul>
<li><p>Provide an object framework that allows programmers to create expressive
queries that will search through a collection of objects, returning the desired
set of objects.</p>

<p><em>Status:</em> Completed, in that queries can be built and run. Queries can be
built with either a low-level C API, or by writing in an SQL-like language (for
example, <tt>SELECT * FROM Transaction WHERE date='15.06.2003';</tt>).</p></li>
<li><p>Provide integration with database backends. In particular, the programmer
should be able to use QOF to create a local 'cache' of objects that mirrors a
subset of the contents in a remote database. The idea is that applications, by
working with a local copy, can be highly responsive and have good performance.
On the other hand, by working with only a subset of the remote data, the
application can avoid having a huge memory footprint. This is a very unique
feature: most applications take an all-or-nothing approach, where either all of
the data is sucked into the application, or none is. Applications that pull in
all of the data have terrible startup times, since they need to load either a
huge file or make a huge database query. They also use a huge amount of memory.
Applications that pull in none of their data, and instead issue SQL queries as
needed, tend to have terrible performance profiles, since the user must wait for
the query to complete and return data. In other words, QOF provides
scalability: instead of the all-or-nothing approach, it provides a middle
ground, allowing small fast apps to access huge databases.</p>

<p><em>Status:</em> The <span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=gnucash&amp;from=index&amp;do=create">?</a>GnuCash</span> backend provides access to file and to SQL
storage. However, not all of this code has been abstracted out in a generic way
to be brought back into QOF. Linas has got the major pieces ready to go, in the
DWI project, but they're not integrated yet. Neil has added support for partial
books that make this cache possible and merging that makes the data in the
partial books accessible. Partial books also make it simple to export an
arbitrary selection of objects and entities. QOF v0.6.0 starts the process of
using <code>libgda</code> - a data abstraction layer inherited from
<a href="http://www.gnome-db.org/">Gnome-DB</a> but available for use by
non-Gnome applications. This should be able to provide the generic access to
various database managers like Postgres, MySQL, SQLite, Oracle and others
using ODBC. Unfortunately, although work has begun to use libgda, the current
gnome-db stable release does not support creating (or deleting) tables. The
module is now under active development as part of the transition to libqof2.</p></li>
<li><p>The current 'client-side' SQL engine is rather basic in its features and
performance. For example, the current search over object fields is O(N),
because each object instance is checked for a match. It would be nice to add
support for 'primary keys' and/or indexes as the first step towards a query
optimizer. Alternately (or in addition), a different query engine might be
wedged into place. For example, sqllite might make for an excellent client-side
sql engine: its small fast and optimized.</p></li>
<li><p>Provide for off-line operation. Because the object data is cached locally,
users should be able to continue doing useful work even if they are not attached
to the net. When they regain net access, QOF should be able to resynchronize
with the remote servers.</p></li>
<li><p><em>Status:</em> Implemented as XML. Any book (partial or complete) can be
written out to XML and read back in to <em>any</em> QOF application.</p></li>
<li><p>Provide memory-management facilities. If objects in the local object
cache haven't been used in a while, and the application memory usage is getting
too large, the unused objects should be &quot;reaped&quot; or garbage-collected.
Of course, this can be done only if the object is fully in sync with the persistent
storage backend.
<em>Status:</em> just an idea, not started.</p></li>
</ul>

<hr />

<h2><span id="download">Downloads</span></h2>

<h3><span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=sourceforge&amp;from=index&amp;do=create">?</a>SourceForge</span></h3>

<p>The source code release for v0.7.5 is available from <a title="qof-0.7.5.tar.gz" href="http://prdownloads.sourceforge.net/qof/qof-0.7.5.tar.gz?download">
<span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=sourceforge&amp;from=index&amp;do=create">?</a>SourceForge</span></a>. The next release will be made from Alioth.</p>

<h3>Debian</h3>

<p>Packages are available in
<a href="http://packages.debian.org/unstable/libs/libqof1">unstable</a>,
<a href="http://packages.debian.org/testing/libs/libqof1">testing</a>
and <a href="http://packages.debian.org/stable/libs/libqof1">stable</a>.</p>

<h3>Ubuntu</h3>

<p>All releases since Dapper have included QOF. Feisty is the
first to include v0.7 or later.</p>

<h3>Gentoo</h3>

<p>QOF 0.7.4 is available in the official repository of Gentoo Linux.</p>

<h3>RPM packages</h3>

<p>There is a sample .spec file available in QOF CVS, available via
<a href="http://cvs.sourceforge.net/viewcvs.py/qof/qof/rpm/">SourceForge</a>.
<a href="http://rpmfind.net/linux/rpm2html/search.php?query=qof">RPM packages</a>
have been prepared for v0.6.4 in Fedora 4 and 5 as well as <span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=opensuse&amp;from=index&amp;do=create">?</a>OpenSuSE</span> Factory.</p>

<h3>Mac OSX &amp; Fink</h3>

<p>Packages are also possible for Fink and <span class="createlink"><a href="http://qof.alioth.debian.org/cgi-bin/ikiwiki.cgi?page=darwinports&amp;from=index&amp;do=create">?</a>DarwinPorts</span> (Mac OSX) - a sample Finkinfo file
is provided in QOF CVS via
<a href="http://cvs.sourceforge.net/viewcvs.py/qof/qof/fink/">SourceForge</a>.</p>

<hr />

<h2><span id="status">Project Status</span></h2>

<p>This code is in active, daily use in several projects
and is 'stable' code. See the
<a href="hacking.html#roadmap">roadmap</a> for
the current development direction.</p>

<p>Some projects currently using QOF are:</p>

<ul>
<li><a href="http://gttr.sourceforge.net">GnoTime</a> (Gnome Time Tracker).</li>
<li><a href="http://www.gnucash.org">GnuCash</a> - modified source.</li>
<li><a href="http://pilot-qof.sourceforge.net/">pilot-qof</a> (Query Palm databases).</li>
<li><a href="http://dwi.sourceforge.net/">DWI</a> (Data With Interaction).</li>
<li><a href="http://cashutil.sourceforge.net/">CashUtil</a> (the gnucash command line interface).</li>
<li><a href="http://gpe-expenses.sourceforge.net/">gpe-expenses</a> for embedded devices like iPAQs.</li>
</ul>

<hr />

<p>Written by Linas Vepstas &lt;linas@linas.org&gt; April 2004</p>

<p>Last updated by Neil Williams &lt;linux@codehelp.co.uk&gt; December 2007.</p>

<hr />

<p><a href="http://sourceforge.net/projects/qof/">
<img src="sflogolg.png" id="sflogo" alt="SourceForge Logo"></a></p>

<div id="licence">
<p>The copyright licensing notice below applies to this text.</p>
<p>Copyright &copy; 2004 Linas Vepstas</p>
<p>Copyright &copy; 2005-2008 Neil Williams</p>
<p>Permission is granted to copy, distribute, and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.2 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with no Front-Cover Texts, and with no Back-Cover Texts.
In installed versions, the licence can be found in the
<a href="../copyright">copyright</a> file.</p>
</div>

<p>This site is powered by <a href="http://ikiwiki.info">ikiwiki</a>.</p>

</div>

<div id="footer">
<div id="pageinfo">









<div class="pagedate">
Last edited Thu 17 Apr 2008 05:05:49 PM UTC
<!-- Created Thu 17 Apr 2008 10:32:43 AM UTC -->
</div>

</div>

<!-- from Query Object Framework -->
</div>

</body>
</html>
